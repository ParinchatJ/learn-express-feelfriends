<!DOCTYPE html>
<html lang="en">

{{> baseHead customTitle=customTitle }}

<body>
    {{> siteHeader}}
      <section class="section">
        <div class="container">
           {{#if onePost}}
        <div class="onepost">
            <h2> {{ onePost.title }} </h2>
            <p>
                <span> {{ onePost.from }} | </span>
                <span> {{ onePost.createdAtText }} </span>
            </p>
            <p>{{ onePost.content }}</p>
        </div>
        <hr>
        {{!-- form --}}
        <form action="/p/{{ onePost.id}}/comment" method="post">
            <p>
                <textarea name="content" placeholder="comment"> {{ values.content }}</textarea>
            </p>
            <p>
                <input type="text" name="from" placeholder="from" value="{{ values.from }}">
            </p>

            {{!-- ทำ checkbox on/off ไว้ทำตอนทำ cookie ได้ไหมนะ? --}}
            <p>
                <input id="input-accepted" type="checkbox" name="accepted">
                <label for="input-accepted">accept me eiei</label>
            </p>
            <button class="button" type="submit">comment</button>

            <p>
            {{#if errorMessage}}
                <p class="errormessage">{{errorMessage}}</p>
            {{/if}}
            </p>
        </form>
        <hr>
        {{!-- นับ comment --}}
        {{#if postComments}}
            {{!-- ให้นับคอมเม้นเป็นความยาว --}}
            <h4>{{ postComments.length }} comments</h4> 
        {{else}}
            <h4>No comment - Lets first!</h4>
        {{/if}}

        {{!-- แสดง comment ข้างล่างภาพรวม --}}
        {{#each postComments }}
            <div class="onepost">
                <p>
                    <span>{{ this.from }} | </span>
                    <span>{{ this.createdAtText }}</span>
                </p>
                <p>{{ this.content }}</p>
            </div>
        {{/each}}

    {{else}}
        <p>This post is not found</p>
    {{/if}}
        </div>
      </section>
    {{> siteFooter}}
</body>
</html>

